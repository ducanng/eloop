{{!-- <script src="/products/script.js">

</script> --}}

 <script type="text/javascript">
    function queryParameter(){
      // http://localhost:3000/menu/explore?partner=&catalogue=&price=
      const localURL = "http://localhost:80"
      const hostURL = "https://eloop-user-hda.herokuapp.com"
      const baseUrl = `${hostURL}/menu/explore?`
      var partnerParam = "partner="
      let catalogueParam = "catalogue="
      let priceParam = "price="
      let sortingParam = "sorting="
  
      //check partner list
      let partnerList = document.getElementById("flush-collapseOne").getElementsByClassName("form-check-input")
      for (let i = 0; i < partnerList.length; i++) {
        if (partnerList[i].checked){
          partnerParam += (partnerList[i].id).toString()
        }
      }
      //check catalogue list
      let catalogueList = document.getElementById("flush-collapseTwo").getElementsByClassName("form-check-input")
      for (let i = 0; i < catalogueList.length; i++) {
        if(catalogueList[i].checked){
          catalogueParam += (catalogueList[i].id).toString()
        }
      }
      //check price list
      let priceList = document.getElementById("flush-collapseThree").getElementsByClassName("form-check-input")
      for (let i = 0; i < priceList.length; i++) {
        if (priceList[i].checked){
          priceParam +=  (priceList[i].id).toString()
        }
      } 
      //check sort list
      let sortingList = document.getElementById("flush-collapseFour").getElementsByClassName("form-check-input")
      for (let i = 0; i < sortingList.length; i++) {
        if (sortingList[i].checked){
          sortingParam +=  (sortingList[i].id).toString()
        }
      } 
      
      window.location= `${baseUrl}${partnerParam}&${catalogueParam}&${priceParam}&${sortingParam}`
    }
 

 </script> 
 
<div id="menu" class="container">
  {{!-- option-list : Start --}}
  <div class="col-3 option-list">
    <div class="accordion accordion-flush" >
      {{!-- option-partner : Start --}}
      <div class="accordion-item">
        <h2 class="accordion-header" id="flush-headingOne">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="true" aria-controls="flush-collapseOne" >
            Cửa hàng
          </button>
        </h2>
        <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" >
          <div class="accordion-body partner-list">
            {{#each partnerList}}
            <div class="form-check" >
              <input  class="form-check-input" type="checkbox" name="partner" id="{{id}}" onclick="queryParameter()">
              <label class="form-check-label" for="{{id}}" >
                {{name}}
              </label>
            </div>
            {{/each}}
          </div>
        </div>
      </div>
      {{!-- option-partner : End --}}

      {{!-- option-catalogue : Start --}}
      <div class="accordion-item">
        <h2 class="accordion-header" id="flush-headingTwo">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="true" aria-controls="flush-collapseTwo">
            Phân loại
          </button>
        </h2>
        <div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" >
          <div class="accordion-body">
            {{#each catalogueList}}
            <div class="form-check">
              <input class="form-check-input" type="radio" name="catalogue" id="{{id}}" onclick="queryParameter()">
              <label class="form-check-label" for="{{id}}">
                {{name}}
              </label>
            </div>
            {{/each}}
          </div>
        </div>
      </div>
      {{!-- option-catalogue : End --}}

      {{!-- option-price : Start --}}
      <div class="accordion-item">
        <h2 class="accordion-header" id="flush-headingThree">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="true" aria-controls="flush-collapseThree">
            Giá
          </button>
        </h2>
        <div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" >
          <div class="accordion-body partner-list">
            {{#if priceList}}
            <div class="form-check">
              <input class="form-check-input" type="radio" name="price" id="0,{{priceList.[0]}}" onclick="queryParameter()">
              <label class="form-check-label" for="{{priceList.[0]}}">
               0 - {{priceList.[0]}}
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="price" id="{{priceList.[0]}},{{priceList.[1]}}" onclick="queryParameter()">
              <label class="form-check-label" for="{{priceList.[1]}}">
                {{priceList.[0]}} - {{priceList.[1]}}
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="price" id="{{priceList.[1]}},{{priceList.[2]}}" onclick="queryParameter()">
              <label class="form-check-label" for="{{priceList.[2]}}">
                {{priceList.[1]}} - {{priceList.[2]}}
              </label>
            </div>
            {{/if}}
          </div>
        </div>
      </div>
      {{!-- option-price : End --}}
      {{!-- option-price : Start --}}
      <div class="accordion-item">
        <h2 class="accordion-header" id="flush-headingFour">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseFour" aria-expanded="true" aria-controls="flush-collapseFour">
            Sắp xếp giá
          </button>
        </h2>
        <div id="flush-collapseFour" class="accordion-collapse collapse" aria-labelledby="flush-headingFour" >
          <div class="accordion-body partner-list">
            <div class="form-check">
              <input class="form-check-input" type="radio" name="sorting" id="ASC" onclick="queryParameter()">
              <label class="form-check-label" for="ASC">
                Tăng dần
              </label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="sorting" id="DESC" onclick="queryParameter()">
              <label class="form-check-label" for="DESC">
                Giảm dần
              </label>
            </div>
          </div>
        </div>
      </div>
      {{!-- option-price : End --}}

    </div>
  </div>
  {{!-- product-list : Start --}}
  <div class="col-7" id="product">
    {{#each productList}}
    <div class="card" style="width: 18rem;">
      <img src="{{productImageUrl}}" alt="{{productName}}">
      {{!-- <a href="/menu/sss">sss</a> --}}
      <div class="product-body">
        <a href="product/detail/{{id}}" class="product-title">
          {{productName}}
        </a>
        <p class="product-price">
          {{price}}đ
        </p>
        <form action="/order/{{id}}" method="post">
          <button class="learn-more">
            <a href="#">
                <span class="circle" aria-hidden="true">
                    <span class="icon arrow"></span>
                </span>
                <span class="button-text">Mua</span>
            </a>
          </button>
        </form>
      </div>
    </div>
    {{/each}}
  </div>
  {{!-- product-list : End --}}

  {{!-- sort-list : Start --}}
  <div class="col-2 sort-list"></div>
  
  {{!-- sort-list : End --}}
</div>